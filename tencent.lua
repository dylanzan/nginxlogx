local pb = require "pb"
local serpent = require("serpent")
local pbio   = require("pb.io")

-- assert(pb.loadfile "person.pb")
assert(pb.loadfile "tencentBidding_v3.pb") --加载pb文件
--assert(pb.loadfile "tencentBidding_v3.pb")

reqArray={
    --"\x0A\x1A628DC923smybymno4kzmi00000\x10\x02\x1A\x08\x0A\x00\x12\x00\x1A\x00\x22\x00\x22\xCF\x01\x0A\x0C120.8.207.47\x12=Dalvik/1.6.0 (Linux; U; Android 4.4.4; 8S47_E2A Build/KTU84P)2 fc1baba2177b26fb649028d6191e31ac8\x00B\x00J\x00R\x0DAndroid 4.4.4Z\x00h\x02p\x00z E50CB52D87617F4D0F126636FFE1DC2F\x8A\x01 19651AD7A4491FE72B5B09050027AD07*(\x0A$AQEBN8GopRvf0gbdP_vxh9rAQlvbV9X_SIpN\x12\x002\xF1\x01\x0A\x1C628DC923smybymno4kzmi0000000\x12\x12LV_1001_LDVi_TV_LD\x1D\x00\x00\xC8C*\x14\x0A\x03mp4\x10\x01\x18\x00 \x98u(\x010\x80\x0F8\xB8\x08J\x0A1504467499R\x0B\x08\x80\x0F\x10\xB8\x08\x1A\x03mp4b\x00p\x01\x82\x01\x0A1504467502\x82\x01\x0A1504467505\x82\x01\x0A1504467714\x82\x01\x0A1504467721\x82\x01\x0A1504467730\x82\x01\x0A1504467734\x82\x01\x0A1504467738\x82\x01\x0A1504467815\x82\x01\x0A1504467821\x82\x01\x0A1504468049\xA2\x01\x02\xDBSB\x22\x0A\x00\x12\x1E\xE4\xB8\xBB\xE9\xA1\xB5 V7.47.3(pub_2204131243)h\x00p\x00|",
    "\x0A\x1A628DD0A9azegvhvnjm3yk00000\x10\x02\x1A\x08\x0A\x00\x12\x00\x1A\x00\x22\x00\x22\x91\x01\x0A\x0E220.195.74.208\x12<Dalvik/2.1.0 (Linux; U; Android 7.1.2; vivo X9 Build/N2G47H)8\xB6\xE7\x02B\x00J\x00R\x09ANDROID 7Z\x00h\x06p\x00\x82\x01 C9BAA9796D8E71752F3DA4BDC8729273\xA2\x01\x04\x08\x00\x10\x00*(\x0A$AQEBU5Au85DCXyfkFcMtPJhzoR-MD73RMkUj\x12\x002\xE1\x01\x0A\x1C628DD0A9azegvhvnjm3yk0000001\x12\x11LV_1001_YDLDVi_LD\x1D\x00\x00\xC8C*\x19\x0A\x03jpg\x0A\x03png\x10\x01\x18\x00 \x98u(\x010\x80\x058\xE8\x02J\x0A1504467506R\x0B\x08\x80\x05\x10\xE8\x02\x1A\x03mp4b\x00p\x05z\x04\x08\x05\x10\x00\x82\x01\x0A1504467715\x82\x01\x0A1504467722\x82\x01\x0A1504467731\x82\x01\x0A1504467735\x82\x01\x0A1504467739\x82\x01\x0A1504467816\x82\x01\x0A1504467822\x82\x01\x0A1504468050\xA2\x01\x02\xDFZB\x1D\x0A\x00\x12\x19\xE8\x85\xBE\xE8\xAE\xAF\xE8\xA7\x86\xE9\xA2\x91 8.6.00.26711h\x00p\x00",

    "\x0A\x1A628DD0A9wkkymcssmv5mu00000\x10\x02\x1A\x1B\x0A\x00\x12\x13https://www.qq.com/\x1A\x00\x22\x00\x22\x94\x02\x0A\x0D110.87.57.127\x12nMozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3947.100 Safari/537.368\x00B\x00J\x00R\x00Z\x00h\x00p\x00\x9A\x01/\x08\xEC\x07\x1A\x0820211207\x22 9e992a4da36db20797b90b496a62538c\x9A\x01/\x08\xED\x07\x1A\x0820220111\x22 52da8fb2d8814632d600e1f11d9ed6fb\xB2\x01 090cc22775b9dc9ba849fa61faa43b37*(\x0A$AQEBlO9fo1MtKzaexgIpu14UWJ1IrjToHYD2\x12\x002\xD4\x01\x0A\x1C628DD0A9wkkymcssmv5mu0000000\x12\x0FLV_1001_LDVi_LD\x1D\x00\x00\xC8C*\x14\x0A\x03mp4\x10\x01\x18\x00 \x98u(\x010\x80\x058\xE0\x03J\x0A1504467504R\x0B\x08\x80\x05\x10\xE0\x03\x1A\x03mp4b\x00p\x01\x82\x01\x0A1504467713\x82\x01\x0A1504467720\x82\x01\x0A1504467729\x82\x01\x0A1504467733\x82\x01\x0A1504467737\x82\x01\x0A1504467814\x82\x01\x0A1504467820\x82\x01\x0A1504468048\xA2\x01\x02\xD7ZB\x04\x0A\x00\x12\x00h\x00p\x00",

    "\x0A\x1A628DD0A9l4epfhy7vgo3400000\x10\x02\x1A\x08\x0A\x00\x12\x00\x1A\x00\x22\x00\x22\xD0\x01\x0A\x0C223.74.102.3\x12>Dalvik/1.6.0 (Linux; U; Android 4.4.2; INPHIC_I6 Build/KOT49H)2 c46f13dc007a2a637e7fbeed728023d68\x00B\x00J\x00R\x0DAndroid 4.4.2Z\x00h\x00p\x00z D2884EED09D7E1ABCE0F3F7374C68129\x8A\x01 2EA5626C68AAE314583B7D7415898A50*(\x0A$AQEBlLTWOfkQt9X6ZvMj57QzxI4O1k50kuuq\x12\x002\x97\x07\x0A\x1C628DD0A9l4epfhy7vgo340000000\x12\x12LV_1001_LDVi_TV_LD\x1D\x00\x00\xC8C*\x14\x0A\x03mp4\x10\x01\x18\x00 \x98u(\x010\x80\x0F8\xB8\x08:\xBD\x0521474837288;21474837590;21474837596;21474838582;21474838591;21474840192;21474840193;21474840781;21474840782;21474840783;21474840784;21474840786;21474840787;21474840789;21474840795;21474841782;001001001;001001002;001001003;001001004;001001005;001001006;001001007;001001008;001002001;001002002;001002003;001003001;001003002;001003003;001003004;001003005;001003006;001003007;001003008;001004001;001004002;001004003;001004004;001004005;001004006;001004007;001004008;001005001;001005002;001005003;001006001;003001001;003001002;003001003;003001004;003001006;003002001;003002002;003002003;003002004;003002005;003005001;003005004;003006001;010001001;010001002;010001003;010001004;010004001;014001001;014001002J\x0A1504467505R\x0B\x08\x80\x0F\x10\xB8\x08\x1A\x03mp4b\x00p\x01\x82\x01\x0A1504467714\x82\x01\x0A1504467721\x82\x01\x0A1504467730\x82\x01\x0A1504467734\x82\x01\x0A1504467738\x82\x01\x0A1504467815\x82\x01\x0A1504467821\x82\x01\x0A1504468049\xA2\x01\x02\xDBSB\x1F\x0A\x00\x12\x1B\xE8\x81\x9A\xE5\xA5\xBD\xE7\x9C\x8B 2018.4.0.15.24.37h\x00p\x00",

    "\x0A\x1A628DD0A9tdfqklblvzyog00000\x10\x02\x1A\x22\x0A\x00\x12\x1Ahttps://sports.qq.com/nba/\x1A\x00\x22\x00\x22\x8E\x01\x0A\x0E122.224.152.42\x12nMozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.368\x00B\x00J\x00R\x00Z\x00h\x00p\x00*(\x0A$AQEBG6KCP4HqfL3CTbFHx3VHZCyib1fWBFaR\x12\x002\xD4\x01\x0A\x1C628DD0A9tdfqklblvzyog0000000\x12\x0FLV_1001_LDVi_LD\x1D\x00\x00\xC8C*\x14\x0A\x03mp4\x10\x01\x18\x00 \x98u(\x010\x80\x058\xE0\x03J\x0A1504467504R\x0B\x08\x80\x05\x10\xE0\x03\x1A\x03mp4b\x00p\x01\x82\x01\x0A1504467713\x82\x01\x0A1504467720\x82\x01\x0A1504467729\x82\x01\x0A1504467733\x82\x01\x0A1504467737\x82\x01\x0A1504467814\x82\x01\x0A1504467820\x82\x01\x0A1504468048\xA2\x01\x02\xD7ZB\x04\x0A\x00\x12\x00h\x00p\x00",

    "\x0A\x1A628DD0A976wvzqvwzf5zq00000\x10\x02\x1A5\x0A\x00\x12-https://v.qq.com/x/cover/mzc00200aw60iac.html\x1A\x00\x22\x00\x22\xDC\x01\x0A\x0E222.188.101.10\x12\x98\x01Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3870.400 QQBrowser/10.8.4405.4008\x00B\x00J\x00R\x00Z\x00h\x00p\x00\xB2\x01 5b02dce6263e86175b2900d706462b8e*(\x0A$AQEB9noY1IIOpafUI_VTTWj_aOAHW8UQweFo\x12\x002\xD4\x01\x0A\x1C628DD0A976wvzqvwzf5zq0000001\x12\x0FLV_1001_LDVi_LD\x1D\x00\x00\xC8C*\x14\x0A\x03mp4\x10\x01\x18\x00 \x98u(\x010\x80\x058\xE0\x03J\x0A1504467504R\x0B\x08\x80\x05\x10\xE0\x03\x1A\x03mp4b\x00p\x02\x82\x01\x0A1504467713\x82\x01\x0A1504467720\x82\x01\x0A1504467729\x82\x01\x0A1504467733\x82\x01\x0A1504467737\x82\x01\x0A1504467814\x82\x01\x0A1504467820\x82\x01\x0A1504468048\xA2\x01\x02\xD7ZB\x04\x0A\x00\x12\x00h\x00p\x00",

    "\x0A\x1A628DD0A9ycad2lay4a4qa00000\x10\x02\x1A\x08\x0A\x00\x12\x00\x1A\x00\x22\x00\x22\x92\x01\x0A\x0E113.135.194.22\x12rMozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.368\x00B\x00J\x00R\x00Z\x00h\x00p\x00*(\x0A$AQEB8iH3ZpgNqIRP6BAqjwGtiq0ePKMwEbsG\x12\x002\xD4\x01\x0A\x1C628DD0A9ycad2lay4a4qa0000000\x12\x0FLV_1001_LDVi_LD\x1D\x00\x00\xC8C*\x14\x0A\x03mp4\x10\x01\x18\x00 \x98u(\x010\x80\x058\xE0\x03J\x0A1504467504R\x0B\x08\x80\x05\x10\xE0\x03\x1A\x03mp4b\x00p\x01\x82\x01\x0A1504467713\x82\x01\x0A1504467720\x82\x01\x0A1504467729\x82\x01\x0A1504467733\x82\x01\x0A1504467737\x82\x01\x0A1504467814\x82\x01\x0A1504467820\x82\x01\x0A1504468048\xA2\x01\x02\xD7ZB\x04\x0A\x00\x12\x00h\x00p\x00",

    "\x0A\x1A628DD0A9prk33anpsts7g00000\x10\x02\x1A\x1B\x0A\x00\x12\x13https://www.qq.com/\x1A\x00\x22\x00\x22\x8C\x01\x0A\x0C119.44.61.54\x12nMozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.368\x00B\x00J\x00R\x00Z\x00h\x00p\x00*(\x0A$AQEBSMKOgRipFyXDvaLTVabs7lSE0Cl0YLTh\x12\x002\xD4\x01\x0A\x1C628DD0A9prk33anpsts7g0000000\x12\x0FLV_1001_LDVi_LD\x1D\x00\x00\xC8C*\x14\x0A\x03mp4\x10\x01\x18\x00 \x98u(\x010\x80\x058\xE0\x03J\x0A1504467504R\x0B\x08\x80\x05\x10\xE0\x03\x1A\x03mp4b\x00p\x01\x82\x01\x0A1504467713\x82\x01\x0A1504467720\x82\x01\x0A1504467729\x82\x01\x0A1504467733\x82\x01\x0A1504467737\x82\x01\x0A1504467814\x82\x01\x0A1504467820\x82\x01\x0A1504468048\xA2\x01\x02\xD7ZB\x04\x0A\x00\x12\x00h\x00p\x00",

    "\x0A\x1A628DD0A9mfpeuy23erudg00000\x10\x02\x1A\x08\x0A\x00\x12\x00\x1A\x00\x22\x00\x22\xCE\x01\x0A\x0D113.89.225.82\x12?Dalvik/2.1.0 (Linux; U; Android 9; x32a0 Build/PPR1.180610.011)2 1f71409eb94a12df520bc1ed73dfcf2c8\x00B\x00J\x00R\x09Android 9Z\x00h\x00p\x00z 9E51DFC2C80C05705C9971B969471593\x8A\x01 0ABA9CBCDAA4E496004E3EBCC19EF3E6*(\x0A$AQEB4AFr7SuVQyW1f402_tenIzj3_LjO0lsn\x12\x002\xD7\x01\x0A\x1C628DD0A9mfpeuy23erudg0000003\x12\x12LV_1001_LDVi_TV_LD\x1D\x00\x00\xC8C*\x14\x0A\x03mp4\x10\x01\x18\x00 \x98u(\x010\x80\x0F8\xB8\x08J\x0A1504467505R\x0B\x08\x80\x0F\x10\xB8\x08\x1A\x03mp4b\x00p\x04\x82\x01\x0A1504467714\x82\x01\x0A1504467721\x82\x01\x0A1504467730\x82\x01\x0A1504467734\x82\x01\x0A1504467738\x82\x01\x0A1504467815\x82\x01\x0A1504467821\x82\x01\x0A1504468049\xA2\x01\x02\xDBSB\x22\x0A\x00\x12\x1E\xE4\xBC\x81\xE9\xB9\x85\xE5\xBD\xB1\xE8\xA7\x86 4.2.03.126978_snmh\x00p\x00",

    "\x0A\x1A628DD0A9uapvlk3y5qsuo00000\x10\x02\x1A\x08\x0A\x00\x12\x00\x1A\x00\x22\x00\x22\x8B\x03\x0A%240e:311:d20:2600:552a:ce33:fc12:c7be\x12\x95\x01Mozilla/5.0 (iPad; CPU OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 TADChid/0 AppVersion/8.6.00 QQLiveBrowser/8.6.002(1f77a431efea69e44034d949fb95552c2572d4098\x00B\x00J\x00R\x06IOS 13Z\x00h\x02p\x00\x9A\x01/\x08\xEC\x07\x1A\x0820211207\x22 748cc1c97a8a0639ff01e06d4b38de1a\x9A\x01/\x08\xED\x07\x1A\x0820220111\x22 70649a0c93352f920acfc9d8b87e50db\xA2\x01\x04\x08\x00\x10\x00\xAA\x01 0ee41698ea23512e2ca3c366b0fffda6*(\x0A$AQEB-Csa-ObU58AHqoQHVmDrbeCcaPCrrauj\x12\x002\xA9\x0A\x0A\x1C628DD0A9uapvlk3y5qsuo0000000\x12\x11LV_1001_YDLDVi_LD\x1D\x00\x00\xC8C*\x19\x0A\x03jpg\x0A\x03png\x10\x01\x18\x00 \x98u(\x010\x80\x058\xE8\x02:\xC5\x0821474837288;21474837289;21474837590;21474837596;21474838582;21474838586;21474838590;21474838591;21474838596;21474838597;21474838598;21474838599;21474838600;21474838888;21474840192;21474840193;21474840195;21474840781;21474840782;21474840783;21474840784;21474840786;21474840787;21474840789;21474840795;21474841782;21474841982;001001001;001001002;001001003;001001004;001001005;001001006;001001007;001001008;001002001;001002002;001002003;001003001;001003002;001003003;001003004;001003005;001003006;001003007;001003008;001004001;001004002;001004003;001004004;001004005;001004006;001004007;001004008;001005001;001005002;001005003;001006001;003001001;003001002;003001003;003001004;003001006;003002001;003002002;003002003;003002004;003002005;003005001;003005004;003006001;010001001;010001002;010001003;010001004;010004001;014001001;014001002;101104103;103103101;106101101;106101104;107101101;107101102;107101103;107101104;107101105;107101106;107103103;107103106;111104102;111104106;116101101;116101102;116101103;116102101;116103101;116103102;116103103;116103104;116103105;116103106;116104101;116105101J\x0A1504467506R\x0B\x08\x80\x05\x10\xE8\x02\x1A\x03mp4b\x00p\x01z\x04\x08\x05\x10\x00\x82\x01\x0A1504467715\x82\x01\x0A1504467722\x82\x01\x0A1504467731\x82\x01\x0A1504467735\x82\x01\x0A1504467739\x82\x01\x0A1504467816\x82\x01\x0A1504467822\x82\x01\x0A1504468050\xA2\x01\x02\xDFZB\x1D\x0A\x00\x12\x19\xE8\x85\xBE\xE8\xAE\xAF\xE8\xA7\x86\xE9\xA2\x91 8.6.00.25656h\x00p\x00",

    "\x0A\x1A628DD0A9a37fa66irbdf600000\x10\x02\x1A\x08\x0A\x00\x12\x00\x1A\x00\x22\x00\x22\x99\x02\x0A\x0E36.142.133.164\x12rMozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.368\x00B\x00J\x00R\x00Z\x00h\x00p\x00\x9A\x01/\x08\xEC\x07\x1A\x0820211207\x22 150514c179798164d672157ccfc455d3\x9A\x01/\x08\xED\x07\x1A\x0820220111\x22 476998b9b41307fbe373f872b9577a63\xB2\x01 b255b43c2b4e1327c6ae54f291119466*(\x0A$AQEBI1NOleprkdGyCO8KJ1I7B4B-Ver1aM0n\x12\x002\xD4\x01\x0A\x1C628DD0A9a37fa66irbdf60000000\x12\x0FLV_1001_LDVi_LD\x1D\x00\x00\xC8C*\x14\x0A\x03mp4\x10\x01\x18\x00 \x98u(\x010\x80\x058\xE0\x03J\x0A1504467504R\x0B\x08\x80\x05\x10\xE0\x03\x1A\x03mp4b\x00p\x01\x82\x01\x0A1504467713\x82\x01\x0A1504467720\x82\x01\x0A1504467729\x82\x01\x0A1504467733\x82\x01\x0A1504467737\x82\x01\x0A1504467814\x82\x01\x0A1504467820\x82\x01\x0A1504468048\xA2\x01\x02\xD7ZB\x04\x0A\x00\x12\x00h\x00p\x00",
}

-- 解码回表
function tencentReqBodyDecode(reqBody)
    local data = assert(pb.decode("Request",reqBody))
    local dealid=data.impression[1]["dealid"]
    logStr=logFormatStr(dealid,data.device["androidid"],data.device["imei"],data.device["mac"],data.device["oaid"],data.device["oaid_md5sum"],data.device["idfa"],data.device["idfa_md5sum"],data.device["ua"])

    return logStr
end

function logFormatStr(dealid,androidid,imei,mac,oaid,oaid_md5sum,idfa,idfa_md5sum,ua)
    return string.format("%s##%s##%s##%s##%s##%s##%s##%s##%s",dealid,androidid,imei,mac,oaid,oaid_md5sum,idfa,idfa_md5sum,ua)
end

for i=1,#reqArray do
    print(tencentReqBodyDecode(reqArray[i]))
    print("--------------------------")
end



